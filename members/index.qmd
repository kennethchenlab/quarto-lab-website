---
title: "Members"
execute:
  echo: false
  warning: false
  message: false
---

```{r}
knitr::opts_chunk$set(output = "asis")

library(yaml)
library(glue)

icon_orcid <- "<svg class='person-icon' viewBox='0 0 256 256'><circle cx='128' cy='128' r='128' fill='#A6CE39'/><text x='128' y='170' text-anchor='middle' font-size='140' fill='white'>iD</text></svg>"

icon_scholar <- "<svg class='person-icon' viewBox='0 0 24 24'><path fill='currentColor' d='M12 3L1 9l11 6 9-4.91V17h2V9z'/></svg>"

icon_github <- "<svg class='person-icon' viewBox='0 0 24 24'><path fill='currentColor' d='M12 .5C5.7.5.5 5.7.5 12c0 5.3 3.4 9.8 8.2 11.4.6.1.8-.2.8-.5v-2c-3.3.7-4-1.6-4-1.6-.5-1.3-1.2-1.6-1.2-1.6-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1.6 1.9 2.5 2.7.3-.8.6-1.4 1-1.7-2.6-.3-5.3-1.3-5.3-5.9 0-1.3.5-2.3 1.1-3.1-.1-.3-.5-1.5.1-3.1 0 0 .9-.3 3.2 1.1.9-.3 1.9-.4 2.9-.4s2 .1 2.9.4c2.3-1.4 3.2-1.1 3.2-1.1.6 1.6.2 2.8.1 3.1.7.8 1.1 1.8 1.1 3.1 0 4.6-2.7 5.6-5.3 5.9.4.4.8 1.1.8 2.2v3.2c0 .3.2.6.8.5C20.6 21.8 24 17.3 24 12 24 5.7 18.3.5 12 .5z'/></svg>"

icon_email <- "<svg class='person-icon' viewBox='0 0 24 24'>
<path fill='currentColor'
d='M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1
0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8
5 8-5v2z'/>
</svg>"


members <- yaml::read_yaml("data/members.yml")
all_members <- c(
  members$faculty,
  members$staff,
  members$postdocs,
  members$students
)

icon_link <- function(href, svg, label) {
  glue::glue(
    "<a href='{href}' target='_blank' aria-label='{label}'>{svg}</a>"
  )
}
# 
# render_group <- function(group) {
#   for (p in group) {
#     cat(glue(
# "<div class='card-item'>
# <a href='{p$bio}' class='person-card-link'>
# <div class='person-card'>
# <img src='{p$photo}' class='person-photo' alt='Photo of {p$name}' />
# 
# <h3>{p$name}</h3>
# <strong>{p$role}</strong>
# {if (!is.null(p$title)) paste('<br>', p$title) else ''}
# 
# <div class='person-links'>
# {if (!is.null(p$email)) paste('<a href=\"mailto:', p$email, '\">Email</a>', sep='') else ''}
# {if (!is.null(p$twitter)) paste(' Â· <a href=\"https://twitter.com/', p$twitter, '\">Twitter</a>', sep='') else ''}
# </div>
# </div>
# </a>
# </div>"
# ))
#   }
# }

render_group <- function(group) {
  for (p in group) {

    links <- c()

    # Email (bring this back)
    if (!is.null(p$email)) {
      links <- c(
        links,
        icon_link(
          paste0("mailto:", p$email),
          icon_email,
          "Email"
        )
      )
    }

    # ORCID
    if (!is.null(p$orcid)) {
      links <- c(
        links,
        icon_link(
          paste0("https://orcid.org/", p$orcid),
          icon_orcid,
          "ORCID"
        )
      )
    }

    # Google Scholar
    if (!is.null(p$scholar)) {
      links <- c(
        links,
        icon_link(p$scholar, icon_scholar, "Google Scholar")
      )
    }

    links_html <- if (length(links)) {
      paste(links, collapse = "\n")
    } else {
      ""
    }

    cat(glue(
"<div class='card-item'>
<a href='{p$bio}' class='person-card-link'>
<div class='person-card'>

<img src='{p$photo}' class='person-photo' alt='Photo of {p$name}' />

<h3>{p$name}</h3>
<strong>{p$role}</strong>
{if (!is.null(p$title)) paste('<br>', p$title) else ''}

<div class='person-links'>
{links_html}
</div>

</div>
</a>
</div>"
))
  }
}



```

## Current Members

::: card-grid
```{r}
render_group(all_members)
```
:::

## Where are they now?

```{r}
alumni <- yaml::read_yaml("data/alumni.yml")$alumni
```

<ul class="alumni-list">

```{r}
for (p in alumni) {
  cat(glue(
"<li>
<strong>{p$name}</strong> <br>
<em>{p$nextstop}</em>
</li>
"
))
}
```

</ul>
